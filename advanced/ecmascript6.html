<!DOCTYPE html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8" />

  <!-- Set the viewport width to device width for mobile -->
  <meta name="viewport" content="width=device-width" />

  <title>ECMAScript 6 介绍 -- JavaScript 标准参考教程（alpha）</title>
  
  <!-- Included CSS Files (Uncompressed) -->
  <!--
  <link rel="stylesheet" href="stylesheets/foundation.css">
  -->
  
  <!-- Included CSS Files (Compressed) -->
  <link rel="stylesheet" href="/css/foundation.css">
  <link rel="stylesheet" href="/css/main.css">

  <!-- IE Fix for HTML5 Tags -->
  <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <script src="/js/jquery.js"></script>
  <script src="/js/toc.js"></script>
  <script src="/js/main.js"></script>

</head>
<body>

<header class="top-bar" id="header">

<div class="fixed">

<nav class="top-bar">
<ul>
<!-- Title Area -->
	<li class="name has-dropdown">
	<h1><a href="/">JavaScript 标准参考教程（alpha） </a></h1>
		<ul class="dropdown">
			
			<li><a href="/#introduction">导论</a></li>
			
			<li><a href="/#grammar">语法</a></li>
			
			<li><a href="/#stdlib">标准库</a></li>
			
			<li><a href="/#oop">面向对象编程</a></li>
			
			<li><a href="/#advanced">语法专题</a></li>
			
			<li><a href="/#dom">DOM模型</a></li>
			
			<li><a href="/#bom">浏览器环境</a></li>
			
			<li><a href="/#htmlapi">Web API</a></li>
			
		</ul>
	</li>
</ul>

<section>


<ul class="left">
<li class="divider"></li>
<li class="has-dropdown"><a class="active" href="#"> 语法专题 </a><ul class="dropdown">



















<li><a href="/advanced/backbonejs.html">MVC框架与Backbone.js</a></li>

















































<li class="active"><a href="#">ECMAScript 6 介绍</a></li>





























<li><a href="/advanced/fsm.html">JavaScript与有限状态机</a></li>

























<li><a href="/advanced/interpreter.html">JavaScript解释器</a></li>









































































<li><a href="/advanced/promise.html">Promise 对象</a></li>



















<li><a href="/advanced/single-thread.html">异步操作概述</a></li>











<li><a href="/advanced/strict.html">严格模式</a></li>



















<li><a href="/advanced/timer.html">定时器</a></li>



























</ul></li>
<li class="divider"></li>
<li class="has-dropdown nav-3"><a href="#"> ECMAScript 6 介绍</a><ul class="dropdown">
</ul></li>
</ul>


<ul class="right">
	<li class="divider"></li>
	<li>
		<a href="https://github.com/ruanyf/jstutorial" target="_blank">GitHub <i class="foundicon-edit"></i></a>
	</li>
	<li class="divider"></li>
	<li>
		<a href="#">TOP <i class="foundicon-up-arrow"></i></a>
	</li>
</ul>

</section>

</nav>  
</div>
</header>


<article class="bookPage">

  <div class="row">
    <div class="twelve columns">

<h1> ECMAScript 6 介绍 </h1>

<aside class="right"><p>来自<a href="/">《JavaScript 标准参考教程（alpha）》</a>，by 阮一峰</p></aside>

<div id="toc" class="panel callout radius">目录</div>


<blockquote>
  <p><strong>[公告] 本节不再更新，变为一个独立项目，请访问<a href="http://es6.ruanyifeng.com/">《ECMAScript 6入门》</a>。（2014年4月25日）</strong></p>
</blockquote>

<h2 id="概述">概述</h2>

<p>ECMAScript 6 是JavaScript的下一代标准，正处在快速开发之中，大部分已经完成了，预计将在2014年正式发布。Mozilla将在这个标准的基础上，推出JavaScript 2.0。</p>

<p>ECMAScript 6的目标，是使得JavaScript可以用来编写复杂的应用程序、函数库和代码的自动生成器（code generator）。</p>

<p>最新的浏览器已经部分支持ECMAScript 6 的语法，可以通过<a href="http://kangax.github.io/es5-compat-table/es6/">《ECMAScript 6 浏览器兼容表》</a>查看浏览器支持情况。</p>

<p>下面对ECMAScript 6新增的语法特性逐一介绍。由于ECMAScript 6的正式标准还未出台，所以以下内容随时可能发生变化，不一定是最后的版本。</p>

<h2 id="使用ecmascript-6的方法">使用ECMAScript 6的方法</h2>

<p>目前，V8引擎已经部署了ECMAScript 6的部分特性。使用node.js 0.11版，就可以体验这些特性。</p>

<p>node.js 0.11版的一种比较方便的使用方法，是使用版本管理工具<a href="https://github.com/creationix/nvm">nvm</a>。下载nvm以后，进入项目目录，运行下面的命令，激活nvm。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">source </span>nvm.sh</code></pre></figure>

<p>然后，指定node运行版本。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">nvm use 0.11</code></pre></figure>

<p>最后，用–harmony参数进入node运行环境，就可以在命令行下体验ECMAScript 6了。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">node <span class="nt">--harmony</span></code></pre></figure>

<p>另外，可以使用Google的<a href="https://github.com/google/traceur-compiler">Traceur</a>（<a href="http://google.github.io/traceur-compiler/demo/repl.html">在线转换工具</a>），将ES6代码编译为ES5。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># 安装</span>
npm <span class="nb">install</span> <span class="nt">-g</span> traceur

<span class="c"># 运行ES6文件</span>
traceur /path/to/es6

<span class="c"># 将ES6文件转为ES5文件</span>
traceur <span class="nt">--script</span> /path/to/es6 <span class="nt">--out</span> /path/to/es5</code></pre></figure>

<h2 id="数据类型">数据类型</h2>

<h3 id="let命令">let命令</h3>

<p><strong>（1）概述</strong></p>

<p>ECMAScript 6新增了let命令，用来声明变量。它的用法类似于var，但是所声明的变量，只在let命令所在的代码块内有效。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
    <span class="kd">let</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">a</span> <span class="c1">// ReferenceError: a is not defined. </span>
<span class="nx">b</span> <span class="c1">//1</span></code></pre></figure>

<p>上面代码在代码块之中，分别用let和var声明了两个变量。然后在代码块之外调用这两个变量，结果let声明的变量报错，var声明的变量返回了正确的值。这表明，let声明的变量只在它所在的代码块有效。</p>

<p>下面的代码如果使用var，最后输出的是9。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[];</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
  <span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
  <span class="p">};</span>
<span class="p">}</span>
<span class="nx">a</span><span class="p">[</span><span class="mi">6</span><span class="p">]();</span> <span class="c1">// 9</span></code></pre></figure>

<p>如果使用let，声明的变量仅在块级作用域内有效，最后输出的是6。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[];</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
  <span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
  <span class="p">};</span>
<span class="p">}</span>
<span class="nx">a</span><span class="p">[</span><span class="mi">6</span><span class="p">]();</span> <span class="c1">// 6</span></code></pre></figure>

<p>注意，let不允许在相同作用域内，重复声明同一个变量。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// 报错</span>
<span class="p">{</span>
    <span class="kd">let</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 报错</span>
<span class="p">{</span>
    <span class="kd">let</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p><strong>（2）块级作用域</strong></p>

<p>let实际上为JavaScript新增了块级作用域。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">f1</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">n</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
	  <span class="kd">let</span> <span class="nx">n</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">n</span><span class="p">);</span> <span class="c1">// 5</span>
<span class="p">}</span></code></pre></figure>

<p>上面的函数有两个代码块，都声明了变量n，运行后输出5。这表示外层代码块不受内层代码块的影响。如果使用var定义变量n，最后输出的值就是10。</p>

<p>块级作用域的出现，实际上使得获得广泛应用的立即执行函数（IIFE）不再必要了。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// IIFE写法</span>
<span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> 
	<span class="kd">var</span> <span class="nx">tmp</span> <span class="o">=</span> <span class="p">...;</span>
	<span class="p">...</span>
<span class="p">}());</span> 

<span class="c1">// 块级作用域写法</span>
<span class="p">{</span>
	<span class="kd">let</span> <span class="nx">tmp</span> <span class="o">=</span> <span class="p">...;</span>
	<span class="p">...</span>
<span class="p">}</span></code></pre></figure>

<p><strong>（3）不存在变量提升</strong></p>

<p>需要注意的是，let声明的变量不存在“变量提升”现象。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span></code></pre></figure>

<p>上面代码运行后会报错，表示x没有定义。如果用var声明x，就不会报错，输出结果为undefined。</p>

<h3 id="const命令">const命令</h3>

<p>const也用来声明变量，但是声明的是常量。一旦声明，常量的值就不能改变。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">const</span> <span class="nx">PI</span> <span class="o">=</span> <span class="mf">3.1415</span><span class="p">;</span>

<span class="nx">PI</span>
<span class="c1">// 3.1415</span>

<span class="nx">PI</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

<span class="nx">PI</span>
<span class="c1">// 3.1415</span>

<span class="kd">const</span> <span class="nx">PI</span> <span class="o">=</span> <span class="mf">3.1</span><span class="p">;</span>

<span class="nx">PI</span>
<span class="c1">// 3.1415</span></code></pre></figure>

<p>上面代码表明改变常量的值是不起作用的。需要注意的是，对常量重新赋值不会报错，只会默默地失败。</p>

<blockquote>
  <p>const的作用域与var命令相同：如果在全局环境声明，常量就在全局环境有效；如果在函数内声明，常量就在函数体内有效。</p>
</blockquote>

<h3 id="set数据结构">Set数据结构</h3>

<p>ES6提供了新的数据结构Set。它类似于数组，但是成员的值都是唯一的，没有重复的值。</p>

<p>Set本身是一个构造函数，用来生成Set数据结构。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Set</span><span class="p">();</span>

<span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">x</span><span class="p">))</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="k">of</span> <span class="nx">s</span><span class="p">)</span> <span class="p">{</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">)}</span>
<span class="c1">// 2 3 4 5</span></code></pre></figure>

<p>上面代码表示，set数据结构不会添加重复的值。</p>

<p>set数据结构有以下属性和方法：</p>

<ul>
  <li>size：返回成员总数。</li>
  <li>add(value)：添加某个值。</li>
  <li>delete(value)：删除某个值。</li>
  <li>has(value)：返回一个布尔值，表示该值是否为set的成员。</li>
  <li>clear()：清除所有成员。</li>
</ul>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">s</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">"1"</span><span class="p">).</span><span class="nx">add</span><span class="p">(</span><span class="s2">"2"</span><span class="p">).</span><span class="nx">add</span><span class="p">(</span><span class="s2">"2"</span><span class="p">);</span> 
<span class="c1">// 注意“2”被加入了两次</span>

<span class="nx">s</span><span class="p">.</span><span class="nx">size</span> <span class="c1">// 2</span>

<span class="nx">s</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="s2">"1"</span><span class="p">)</span>    <span class="c1">// true</span>
<span class="nx">s</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="s2">"2"</span><span class="p">)</span>    <span class="c1">// true</span>
<span class="nx">s</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="s2">"3"</span><span class="p">)</span>   <span class="c1">// false</span>

<span class="nx">s</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s2">"2"</span><span class="p">);</span>
<span class="nx">s</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="s2">"2"</span><span class="p">)</span>    <span class="c1">// false</span></code></pre></figure>

<h3 id="map数据结构">Map数据结构</h3>

<p>ES6还提供了map数据结构。它类似于对象，就是一个键值对的集合，但是“键”的范围不限于字符串，甚至对象也可以当作键。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>

<span class="nx">o</span> <span class="o">=</span> <span class="p">{</span><span class="na">p</span><span class="p">:</span> <span class="s2">"Hello World"</span><span class="p">};</span>
<span class="nx">m</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">o</span><span class="p">))</span>
<span class="c1">// "content"</span></code></pre></figure>

<p>上面代码将一个对象当作m的一个键。</p>

<p>Map数据结构有以下属性和方法。</p>

<ul>
  <li>size：返回成员总数。</li>
  <li>set(key, value)：设置一个键值对。</li>
  <li>get(key)：读取一个键。</li>
  <li>has(key)：返回一个布尔值，表示某个键是否在Map数据结构中。</li>
  <li>delete(key)：删除某个键。</li>
  <li>clear()：清除所有成员。</li>
</ul>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span> 

<span class="nx">m</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="s2">"edition"</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>        <span class="c1">// 键是字符串</span>
<span class="nx">m</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="mi">262</span><span class="p">,</span> <span class="s2">"standard"</span><span class="p">)</span>     <span class="c1">// 键是数值</span>
<span class="nx">m</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span> <span class="s2">"nah"</span><span class="p">)</span>    <span class="c1">// 键是undefined</span>

<span class="kd">var</span> <span class="nx">hello</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"hello"</span><span class="p">);}</span>
<span class="nx">m</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">hello</span><span class="p">,</span> <span class="s2">"Hello ES6!"</span><span class="p">)</span> <span class="c1">// 键是函数</span>

<span class="nx">m</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="s2">"edition"</span><span class="p">)</span>     <span class="c1">// true</span>
<span class="nx">m</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="s2">"years"</span><span class="p">)</span>       <span class="c1">// false</span>
<span class="nx">m</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="mi">262</span><span class="p">)</span>           <span class="c1">// true</span>
<span class="nx">m</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="kc">undefined</span><span class="p">)</span>     <span class="c1">// true</span>
<span class="nx">m</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">hello</span><span class="p">)</span>         <span class="c1">// true</span>

<span class="nx">m</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="kc">undefined</span><span class="p">)</span>
<span class="nx">m</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="kc">undefined</span><span class="p">)</span>       <span class="c1">// false</span>

<span class="nx">m</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">hello</span><span class="p">)</span>  <span class="c1">// Hello ES6!</span>
<span class="nx">m</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s2">"edition"</span><span class="p">)</span>  <span class="c1">// 6</span></code></pre></figure>

<h3 id="rest运算符">rest（…）运算符</h3>

<p><strong>（1）基本用法</strong></p>

<p>ES6引入rest运算符（…），用于获取函数的多余参数，这样就不需要使用arguments.length了。rest运算符后面是一个数组变量，该变量将多余的参数放入数组中。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">add</span><span class="p">(...</span><span class="nx">values</span><span class="p">)</span> <span class="p">{</span>
   <span class="kd">let</span> <span class="nx">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

   <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">val</span> <span class="k">of</span> <span class="nx">values</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">sum</span> <span class="o">+=</span> <span class="nx">val</span><span class="p">;</span>
   <span class="p">}</span>

   <span class="k">return</span> <span class="nx">sum</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">add</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">// 10</span></code></pre></figure>

<p>上面代码的add函数是一个求和函数，利用rest运算符，可以向该函数传入任意数目的参数。</p>

<p>下面是一个利用rest运算符改写数组push方法的例子。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">push</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="p">...</span><span class="nx">items</span><span class="p">)</span> <span class="p">{</span> 
  <span class="nx">items</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">array</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>
 
<span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[];</span>
<span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="s2">"a1"</span><span class="p">,</span> <span class="s2">"a2"</span><span class="p">,</span> <span class="s2">"a3"</span><span class="p">,</span> <span class="s2">"a4"</span><span class="p">);</span> </code></pre></figure>

<p><strong>（2）将数组转为参数序列</strong></p>

<p>rest运算符不仅可以用于函数定义，还可以用于函数调用。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">f</span><span class="p">(</span><span class="nx">s1</span><span class="p">,</span> <span class="nx">s2</span><span class="p">,</span> <span class="nx">s3</span><span class="p">,</span> <span class="nx">s4</span><span class="p">,</span> <span class="nx">s5</span><span class="p">)</span> <span class="p">{</span>
 	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">s1</span> <span class="o">+</span> <span class="nx">s2</span> <span class="o">+</span> <span class="nx">s3</span> <span class="o">+</span> <span class="nx">s4</span> <span class="o">+</span><span class="nx">s5</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"a2"</span><span class="p">,</span> <span class="s2">"a3"</span><span class="p">,</span> <span class="s2">"a4"</span><span class="p">,</span> <span class="s2">"a5"</span><span class="p">];</span>

<span class="nx">f</span><span class="p">(</span><span class="s2">"a1"</span><span class="p">,</span> <span class="p">...</span><span class="nx">a</span><span class="p">)</span>
<span class="c1">// a1a2a3a4a5</span></code></pre></figure>

<p>从上面的例子可以看出，rest运算符的另一个重要作用是，可以将数组转变成正常的参数序列。利用这一点，可以简化求出一个数组最大元素的写法。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// ES5</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">[</span><span class="mi">14</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">77</span><span class="p">])</span>

<span class="c1">// ES6</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(...[</span><span class="mi">14</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">77</span><span class="p">])</span>

<span class="c1">// 等同于</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">77</span><span class="p">);</span></code></pre></figure>

<p>上面代码表示，由于JavaScript不提供求数组最大元素的函数，所以只能套用Math.max函数，将数组转为一个参数序列，然后求最大值。有了rest运算符以后，就可以直接用Math.max了。</p>

<h3 id="遍历器iterator">遍历器（Iterator）</h3>

<p>遍历器（Iterator）是一种协议，任何对象都可以部署遍历器协议，从而使得for…of循环可以遍历这个对象。</p>

<p>遍历器协议规定，任意对象只要部署了next方法，就可以作为遍历器，但是next方法必须返回一个包含value和done两个属性的对象。其中，value属性当前遍历位置的值，done属性是一个布尔值，表示遍历是否结束。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">makeIterator</span><span class="p">(</span><span class="nx">array</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">nextIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    
    <span class="k">return</span> <span class="p">{</span>
       <span class="na">next</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
           <span class="k">return</span> <span class="nx">nextIndex</span> <span class="o">&lt;</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="p">?</span>
               <span class="p">{</span><span class="na">value</span><span class="p">:</span> <span class="nx">array</span><span class="p">[</span><span class="nx">nextIndex</span><span class="o">++</span><span class="p">],</span> <span class="na">done</span><span class="p">:</span> <span class="kc">false</span><span class="p">}</span> <span class="p">:</span>
               <span class="p">{</span><span class="na">done</span><span class="p">:</span> <span class="kc">true</span><span class="p">};</span>
       <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">it</span> <span class="o">=</span> <span class="nx">makeIterator</span><span class="p">([</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">]);</span>

<span class="nx">it</span><span class="p">.</span><span class="nx">next</span><span class="p">().</span><span class="nx">value</span> <span class="c1">// 'a'</span>
<span class="nx">it</span><span class="p">.</span><span class="nx">next</span><span class="p">().</span><span class="nx">value</span> <span class="c1">// 'b'</span>
<span class="nx">it</span><span class="p">.</span><span class="nx">next</span><span class="p">().</span><span class="nx">done</span>  <span class="c1">// true</span></code></pre></figure>

<p>下面是一个无限运行的遍历器的例子。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">idMaker</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    
    <span class="k">return</span> <span class="p">{</span>
       <span class="na">next</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
           <span class="k">return</span> <span class="p">{</span><span class="na">value</span><span class="p">:</span> <span class="nx">index</span><span class="o">++</span><span class="p">,</span> <span class="na">done</span><span class="p">:</span> <span class="kc">false</span><span class="p">};</span>
       <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">it</span> <span class="o">=</span> <span class="nx">idMaker</span><span class="p">();</span>

<span class="nx">it</span><span class="p">.</span><span class="nx">next</span><span class="p">().</span><span class="nx">value</span> <span class="c1">// '0'</span>
<span class="nx">it</span><span class="p">.</span><span class="nx">next</span><span class="p">().</span><span class="nx">value</span> <span class="c1">// '1'</span>
<span class="nx">it</span><span class="p">.</span><span class="nx">next</span><span class="p">().</span><span class="nx">value</span> <span class="c1">// '2'</span>
<span class="c1">// ...</span></code></pre></figure>

<h3 id="generator-函数">generator 函数</h3>

<p>上一部分的遍历器，用来依次取出集合中的每一个成员，但是某些情况下，我们需要的是一个内部状态的遍历器。也就是说，每调用一次遍历器，对象的内部状态发生一次改变（可以理解成发生某些事件）。ECMAScript 6 引入了generator函数，作用就是返回一个内部状态的遍历器，主要特征是函数内部使用了yield语句。</p>

<p>当调用generator函数的时候，该函数并不执行，而是返回一个遍历器（可以理解成暂停执行）。以后，每次调用这个遍历器的next方法，就从函数体的头部或者上一次停下来的地方开始执行（可以理解成恢复执行），直到遇到下一个yield语句为止，并返回该yield语句的值。</p>

<p>ECMAScript 6草案定义的generator函数，需要在function关键字后面，加一个星号。然后，函数内部使用yield语句，定义遍历器的每个成员。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span><span class="o">*</span> <span class="nx">helloWorldGenerator</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">yield</span> <span class="s1">'hello'</span><span class="p">;</span>
    <span class="k">yield</span> <span class="s1">'world'</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>yield有点类似于return语句，都能返回一个值。区别在于每次遇到yield，函数返回紧跟在yield后面的那个表达式的值，然后暂停执行，下一次从该位置继续向后执行，而return语句不具备位置记忆的功能。</p>

<p>上面代码定义了一个generator函数helloWorldGenerator，它的遍历器有两个成员“hello”和“world”。调用这个函数，就会得到遍历器。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">hw</span> <span class="o">=</span> <span class="nx">helloWorldGenerator</span><span class="p">();</span></code></pre></figure>

<p>执行遍历器的next方法，则会依次遍历每个成员。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">hw</span><span class="p">.</span><span class="nx">next</span><span class="p">()</span> 
<span class="c1">// { value: 'hello', done: false }</span>

<span class="nx">hw</span><span class="p">.</span><span class="nx">next</span><span class="p">()</span>
<span class="c1">// { value: 'world', done: false }</span>

<span class="nx">hw</span><span class="p">.</span><span class="nx">next</span><span class="p">()</span>
<span class="c1">// { value: undefined, done: true }</span>

<span class="nx">hw</span><span class="p">.</span><span class="nx">next</span><span class="p">()</span>
<span class="c1">// Error: Generator has already finished</span>
<span class="c1">//	at GeneratorFunctionPrototype.next (native)</span>
<span class="c1">//	at repl:1:3</span>
<span class="c1">//  at REPLServer.defaultEval (repl.js:129:27)</span>
<span class="c1">//  ... </span></code></pre></figure>

<p>上面代码一共调用了四次next方法。</p>

<ul>
  <li>
    <p>第一次调用：函数开始执行，直到遇到第一句yield语句为止。next方法返回一个对象，它的value属性就是当前yield语句的值hello，done属性的值false，表示遍历还没有结束。</p>
  </li>
  <li>
    <p>第二次调用：函数从上次yield语句停下的地方，一直执行到下一个yield语句。next方法返回一个对象，它的value属性就是当前yield语句的值world，done属性的值false，表示遍历还没有结束。</p>
  </li>
  <li>
    <p>第三次调用：函数从上次yield语句停下的地方，一直执行到函数结束。next方法返回一个对象，它的value属性就是函数最后的返回值，由于上例的函数没有return语句（即没有返回值），所以value属性的值为undefined，done属性的值true，表示遍历已经结束。</p>
  </li>
  <li>
    <p>第四次调用：由于此时函数已经运行完毕，next方法直接抛出一个错误。</p>
  </li>
</ul>

<p>遍历器的本质，其实是使用yield语句暂停执行它后面的操作，当调用next方法时，再继续往下执行，直到遇到下一个yield语句，并返回该语句的值，如果直到运行结束。</p>

<p>如果next方法带一个参数，该参数就会被当作上一个yield语句的返回值。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span><span class="o">*</span> <span class="nx">f</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="kc">true</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">reset</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">i</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">reset</span><span class="p">)</span> <span class="p">{</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">f</span><span class="p">();</span>

<span class="nx">g</span><span class="p">.</span><span class="nx">next</span><span class="p">()</span> <span class="c1">// { value: 0, done: false }</span>
<span class="nx">g</span><span class="p">.</span><span class="nx">next</span><span class="p">()</span> <span class="c1">// { value: 1, done: false }</span>
<span class="nx">g</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="c1">// { value: 0, done: false }</span></code></pre></figure>

<p>上面代码先定义了一个可以无限运行的generator函数f，如果next方法没有参数，正常情况下返回一个递增的i；如果next方法有参数，则上一次yield语句的返回值将会等于该参数。如果该参数为true，则会重置i的值。</p>

<p>generator函数的这种暂停执行的效果，意味着可以把异步操作写在yield语句里面，等到调用next方法时再往后执行。这实际上等同于不需要写回调函数了，因为异步操作的后续操作可以放在yield语句下面，反正要等到调用next方法时再执行。所以，generator函数的一个重要实际意义就是用来处理异步操作，改写回调函数。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span><span class="o">*</span> <span class="nx">loadUI</span><span class="p">()</span> <span class="p">{</span> 
	<span class="nx">showLoadingScreen</span><span class="p">();</span> 
	<span class="k">yield</span> <span class="nx">loadUIDataAsynchronously</span><span class="p">();</span> 
	<span class="nx">hideLoadingScreen</span><span class="p">();</span> 
<span class="p">}</span> </code></pre></figure>

<p>上面代码表示，第一次调用loadUI函数时，该函数不会执行，仅返回一个遍历器。下一次对该遍历器调用next方法，则会显示登录窗口，并且异步加载数据。再一次使用next方法，则会隐藏登录窗口。可以看到，这种写法的好处是所有登录窗口的逻辑，都被封装在一个函数，按部就班非常清晰。</p>

<p>下面是一个利用generator函数，实现斐波那契数列的例子。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span><span class="o">*</span> <span class="nx">fibonacci</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">previous</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">current</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> 
	<span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span> 
		<span class="kd">var</span> <span class="nx">temp</span> <span class="o">=</span> <span class="nx">previous</span><span class="p">;</span> 
		<span class="nx">previous</span> <span class="o">=</span> <span class="nx">current</span><span class="p">;</span> 
		<span class="nx">current</span> <span class="o">=</span> <span class="nx">temp</span> <span class="o">+</span> <span class="nx">current</span><span class="p">;</span> 
		<span class="k">yield</span> <span class="nx">current</span><span class="p">;</span> 
	<span class="p">}</span> 
<span class="p">}</span> 

<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="k">of</span> <span class="nx">fibonacci</span><span class="p">())</span> <span class="p">{</span> 
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span> 
<span class="p">}</span> 
<span class="c1">// 1, 2, 3, 5, 8, 13, ..., </span></code></pre></figure>

<p>下面是利用for…of语句，对斐波那契数列的另一种实现。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span><span class="o">*</span> <span class="nx">fibonacci</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="p">[</span><span class="nx">prev</span><span class="p">,</span> <span class="nx">curr</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">];</span>
    <span class="k">for</span> <span class="p">(;;)</span> <span class="p">{</span>
        <span class="p">[</span><span class="nx">prev</span><span class="p">,</span> <span class="nx">curr</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">curr</span><span class="p">,</span> <span class="nx">prev</span> <span class="o">+</span> <span class="nx">curr</span><span class="p">];</span>
        <span class="k">yield</span> <span class="nx">curr</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">for</span> <span class="p">(</span><span class="nx">n</span> <span class="k">of</span> <span class="nx">fibonacci</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&gt;</span> <span class="mi">1000</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">n</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>从上面代码可见，使用for…of语句时不需要使用next方法。</p>

<p>这里需要注意的是，yield语句运行的时候是同步运行，而不是异步运行（否则就失去了取代回调函数的设计目的了）。实际操作中，一般让yield语句返回Promises对象。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">Q</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'q'</span><span class="p">);</span>
 
<span class="kd">function</span> <span class="nx">delay</span><span class="p">(</span><span class="nx">milliseconds</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">deferred</span> <span class="o">=</span> <span class="nx">Q</span><span class="p">.</span><span class="nx">defer</span><span class="p">();</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">deferred</span><span class="p">.</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">milliseconds</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">deferred</span><span class="p">.</span><span class="nx">promise</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="o">*</span><span class="nx">f</span><span class="p">(){</span>
    <span class="k">yield</span> <span class="nx">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="p">};</span></code></pre></figure>

<p>上面代码yield语句返回的就是一个Promises对象。</p>

<p>如果有一系列任务需要全部完成后，才能进行下一步操作，yield语句后面可以跟一个数组。下面就是一个例子。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="o">*</span><span class="nx">f</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">urls</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">'http://example.com/'</span><span class="p">,</span>
        <span class="s1">'http://twitter.com/'</span><span class="p">,</span>
        <span class="s1">'http://bbc.co.uk/news/'</span>
    <span class="p">];</span>
    <span class="kd">var</span> <span class="nx">arrayOfPromises</span> <span class="o">=</span> <span class="nx">urls</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">someOperation</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">arrayOfResponses</span> <span class="o">=</span> <span class="k">yield</span> <span class="nx">arrayOfPromises</span><span class="p">;</span>
 
    <span class="k">this</span><span class="p">.</span><span class="nx">body</span> <span class="o">=</span> <span class="s2">"Results"</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">urls</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">body</span> <span class="o">+=</span> <span class="s1">'</span><span class="err">\</span><span class="s1">n'</span> <span class="o">+</span> <span class="nx">urls</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="s1">' response length is '</span>
              <span class="o">+</span> <span class="nx">arrayOfResponses</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">body</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span></code></pre></figure>

<h3 id="原生对象的扩展">原生对象的扩展</h3>

<p>ES6对JavaScript的原生对象，进行了扩展，提供了一系列新的属性和方法。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">Number</span><span class="p">.</span><span class="nx">EPSILON</span>
<span class="nb">Number</span><span class="p">.</span><span class="nx">isInteger</span><span class="p">(</span><span class="kc">Infinity</span><span class="p">)</span> <span class="c1">// false</span>
<span class="nb">Number</span><span class="p">.</span><span class="nb">isNaN</span><span class="p">(</span><span class="s2">"NaN"</span><span class="p">)</span> <span class="c1">// false</span>

<span class="nb">Math</span><span class="p">.</span><span class="nx">acosh</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1">// 1.762747174039086</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">hypot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="c1">// 5</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">imul</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">// 2</span>

<span class="s2">"abcde"</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s2">"cd"</span><span class="p">)</span> <span class="c1">// true</span>
<span class="s2">"abc"</span><span class="p">.</span><span class="nx">repeat</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1">// "abcabcabc"</span>

<span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">'*'</span><span class="p">))</span> <span class="c1">// Returns a real Array</span>
<span class="nb">Array</span><span class="p">.</span><span class="k">of</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">// Similar to new Array(...), but without special one-arg behavior</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">].</span><span class="nx">fill</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">// [0,7,7]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nx">findIndex</span><span class="p">(</span><span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">// 1</span>
<span class="p">[</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">].</span><span class="nx">entries</span><span class="p">()</span> <span class="c1">// iterator [0, "a"], [1,"b"], [2,"c"]</span>
<span class="p">[</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">].</span><span class="nx">keys</span><span class="p">()</span> <span class="c1">// iterator 0, 1, 2</span>
<span class="p">[</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">].</span><span class="nx">values</span><span class="p">()</span> <span class="c1">// iterator "a", "b", "c"</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span><span class="nx">Point</span><span class="p">,</span> <span class="p">{</span> <span class="na">origin</span><span class="p">:</span> <span class="k">new</span> <span class="nx">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="p">})</span></code></pre></figure>

<h2 id="语法糖">语法糖</h2>

<p>ECMAScript 6提供了很多JavaScript语法的便捷写法。</p>

<h3 id="二进制和八进制表示法">二进制和八进制表示法</h3>

<p>ES6提供了二进制和八进制数值的新的写法，分别用前缀0b和0o表示。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="mb">0b111110111</span> <span class="o">===</span> <span class="mi">503</span> <span class="c1">// true</span>
<span class="mo">0o767</span> <span class="o">===</span> <span class="mi">503</span> <span class="c1">// true</span></code></pre></figure>

<h3 id="增强的对象写法">增强的对象写法</h3>

<p>ES6允许直接写入变量和函数，作为对象的属性和方法。这样的书写更加简洁。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">Person</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="s1">'张三'</span><span class="p">,</span>
  <span class="c1">//等同于birth: birth</span>
  <span class="nx">birth</span><span class="p">,</span>
  <span class="c1">// 等同于hello: function ()...</span>
  <span class="nx">hello</span><span class="p">()</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'我的名字是'</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span> <span class="p">}</span>
<span class="p">};</span></code></pre></figure>

<h3 id="箭头函数arrow">箭头函数（arrow）</h3>

<p><strong>（1）定义</strong></p>

<p>ES6允许使用“箭头”（=&gt;）定义函数。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">v</span> <span class="o">=&gt;</span> <span class="nx">v</span><span class="p">;</span></code></pre></figure>

<p>上面的箭头函数等同于：</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">v</span><span class="p">;</span>
<span class="p">};</span></code></pre></figure>

<p>如果箭头函数不需要参数或需要多个参数，就使用一个圆括号代表参数部分。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">;</span> 
<span class="c1">// 等同于</span>
<span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(){</span> <span class="k">return</span> <span class="mi">5</span> <span class="p">};</span>

<span class="kd">var</span> <span class="nx">sum</span> <span class="o">=</span> <span class="p">(</span><span class="nx">num1</span><span class="p">,</span> <span class="nx">num2</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">num1</span> <span class="o">+</span> <span class="nx">num2</span><span class="p">;</span>
<span class="c1">// 等同于</span>
<span class="kd">var</span> <span class="nx">sum</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">num1</span><span class="p">,</span> <span class="nx">num2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">num1</span> <span class="o">+</span> <span class="nx">num2</span><span class="p">;</span>
<span class="p">};</span></code></pre></figure>

<p>如果箭头函数的代码块部分多于一条语句，就要使用大括号将它们括起来，并且使用return语句返回。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">sum</span> <span class="o">=</span> <span class="p">(</span><span class="nx">num1</span><span class="p">,</span> <span class="nx">num2</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">num1</span> <span class="o">+</span> <span class="nx">num2</span><span class="p">;</span> <span class="p">}</span></code></pre></figure>

<p>由于大括号被解释为代码块，所以如果箭头函数直接返回一个对象，必须在对象外面加上括号。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">getTempItem</span> <span class="o">=</span> <span class="nx">id</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="nx">id</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s2">"Temp"</span> <span class="p">});</span></code></pre></figure>

<p><strong>（2）实例：回调函数的简化</strong></p>

<p>箭头函数的一个用处是简化回调函数。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// 正常函数写法</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span><span class="p">;</span>
<span class="p">});</span>

<span class="c1">// 箭头函数写法</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span><span class="p">);</span></code></pre></figure>

<p>另一个例子是</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// 正常函数写法</span>
<span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">values</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">-</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">});</span>

<span class="c1">// 箭头函数写法</span>
<span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">values</span><span class="p">.</span><span class="nx">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">a</span> <span class="o">-</span> <span class="nx">b</span><span class="p">);</span></code></pre></figure>

<p><strong>（3）注意点</strong></p>

<p>箭头函数有几个使用注意点。</p>

<ul>
  <li>函数体内的this对象，绑定定义时所在的对象，而不是使用时所在的对象。</li>
  <li>不可以当作构造函数，也就是说，不可以使用new命令，否则会抛出一个错误。</li>
  <li>不可以使用arguments对象，该对象在函数体内不存在。</li>
</ul>

<p>关于this对象，下面的代码将它绑定定义时的对象。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">handler</span> <span class="o">=</span> <span class="p">{</span>

    <span class="na">id</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>

    <span class="na">init</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span>
                <span class="nx">event</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">doSomething</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">type</span><span class="p">),</span> <span class="kc">false</span><span class="p">);</span>
    <span class="p">},</span>

    <span class="na">doSomething</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Handling "</span> <span class="o">+</span> <span class="nx">type</span>  <span class="o">+</span> <span class="s2">" for "</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span></code></pre></figure>

<p>上面代码的init和doSomething方法中，都使用了箭头函数，它们中的this都绑定handler对象。否则，doSomething方法内部的this对象就指向全局对象，运行时会报错。</p>

<h3 id="函数参数的默认值">函数参数的默认值</h3>

<p>ECMAScript 6 允许为函数的参数设置默认值。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">Point</span><span class="p">(</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
   <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Point</span><span class="p">();</span> 
<span class="c1">// p = { x:0, y:0 }</span></code></pre></figure>

<h3 id="模板字符串">模板字符串</h3>

<p>模板字符串（template string）是增强版的字符串，即可以当作普通字符串使用，也可以在字符串中嵌入变量。它用反引号（`）标识。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// 普通字符串</span>
<span class="s2">`In JavaScript '\n' is a line-feed.`</span>

<span class="c1">// 多行字符串</span>
<span class="s2">`In JavaScript this is
 not legal.`</span>

<span class="c1">// 字符串中嵌入变量</span>
<span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="s2">"Bob"</span><span class="p">,</span> <span class="nx">time</span> <span class="o">=</span> <span class="s2">"today"</span><span class="p">;</span>
<span class="s2">`Hello </span><span class="p">${</span><span class="nx">name</span><span class="p">}</span><span class="s2">, how are you </span><span class="p">${</span><span class="nx">time</span><span class="p">}</span><span class="s2">?`</span>

<span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span> <span class="nx">x</span> <span class="p">}</span><span class="s2"> + </span><span class="p">${</span> <span class="nx">y</span> <span class="p">}</span><span class="s2"> = </span><span class="p">${</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span> 
<span class="c1">// "1 + 2 = 3"</span></code></pre></figure>

<h3 id="forof循环">for…of循环</h3>

<p>JavaScript原有的for…in循环，只能获得对象的键名，不能直接获取键值。ES6提供for…of循环，允许遍历获得键值。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">,</span> <span class="s2">"d"</span><span class="p">];</span>
<span class="k">for</span> <span class="p">(</span><span class="nx">a</span> <span class="k">in</span> <span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// 0</span>
<span class="c1">// 1</span>
<span class="c1">// 2</span>
<span class="c1">// 3</span>

<span class="k">for</span> <span class="p">(</span><span class="nx">a</span> <span class="k">of</span> <span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span> 
<span class="p">}</span>
<span class="c1">// a</span>
<span class="c1">// b</span>
<span class="c1">// c</span>
<span class="c1">// d</span></code></pre></figure>

<p>上面代码表明，for…in循环读取键名，for…of循环读取键值。</p>

<p>for…of循环还可以遍历对象。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">es6</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">edition</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
  <span class="na">committee</span><span class="p">:</span> <span class="s2">"TC39"</span><span class="p">,</span>
  <span class="na">standard</span><span class="p">:</span> <span class="s2">"ECMA-262"</span>
<span class="p">};</span>

<span class="k">for</span> <span class="p">(</span><span class="nx">e</span> <span class="k">in</span> <span class="nx">es6</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// edition</span>
<span class="c1">// committee</span>
<span class="c1">// standard</span>

<span class="kd">var</span> <span class="nx">engines</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Set</span><span class="p">([</span><span class="s2">"Gecko"</span><span class="p">,</span> <span class="s2">"Trident"</span><span class="p">,</span> <span class="s2">"Webkit"</span><span class="p">,</span> <span class="s2">"Webkit"</span><span class="p">]);</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">e</span> <span class="k">of</span> <span class="nx">engines</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// Gecko</span>
<span class="c1">// Trident</span>
<span class="c1">// Webkit</span>

<span class="kd">var</span> <span class="nx">es6</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>
<span class="nx">es6</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="s2">"edition"</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
<span class="nx">es6</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="s2">"committee"</span><span class="p">,</span> <span class="s2">"TC39"</span><span class="p">);</span>
<span class="nx">es6</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="s2">"standard"</span><span class="p">,</span> <span class="s2">"ECMA-262"</span><span class="p">);</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="p">[</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">]</span> <span class="k">of</span> <span class="nx">es6</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">": "</span> <span class="o">+</span> <span class="nx">value</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// edition: 6</span>
<span class="c1">// committee: TC39</span>
<span class="c1">// standard: ECMA-262</span></code></pre></figure>

<p>上面代码一共包含三个例子，第一个是for…in循环的例子，后两个是for…of循环的例子。最后一个例子是同时遍历对象的键名和键值。</p>

<h3 id="数组推导">数组推导</h3>

<p><strong>（1）基本用法</strong></p>

<p>ES6提供简洁写法，允许直接通过现有数组生成新数组，这被称为数组推导（array comprehension）。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">a2</span> <span class="o">=</span> <span class="p">[</span><span class="nx">i</span> <span class="o">*</span> <span class="mi">2</span> <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="k">of</span> <span class="nx">a1</span><span class="p">)];</span>

<span class="nx">a2</span> <span class="c1">// [2, 4, 6, 8]</span></code></pre></figure>

<p>上面代码表示，通过for…of结构，数组a2直接在a1的基础上生成。</p>

<p>数组推导可以替代map和filter方法。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">[</span><span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="k">of</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="nx">i</span> <span class="o">*</span> <span class="nx">i</span><span class="p">];</span>
<span class="c1">// 等价于</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">i</span> <span class="o">*</span> <span class="nx">i</span> <span class="p">});</span>

<span class="p">[</span><span class="nx">i</span> <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="k">of</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mi">8</span><span class="p">])</span> <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)];</span>
<span class="c1">// 等价于</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mi">8</span><span class="p">].</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="p">});</span></code></pre></figure>

<p>上面代码说明，模拟map功能只要单纯的for…of循环就行了，模拟filter功能除了for…of循环，还必须加上if语句。</p>

<p><strong>（2）多重推导</strong></p>

<p>新引入的for…of结构，可以直接跟在表达式的前面或后面，甚至可以在一个数组推导中，使用多个for…of结构。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a1</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"x1"</span><span class="p">,</span> <span class="s2">"y1"</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">a2</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"x2"</span><span class="p">,</span> <span class="s2">"y2"</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">a3</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"x3"</span><span class="p">,</span> <span class="s2">"y3"</span><span class="p">];</span>

<span class="p">[(</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">s</span> <span class="o">+</span> <span class="nx">w</span> <span class="o">+</span> <span class="nx">r</span><span class="p">))</span> <span class="k">for</span> <span class="p">(</span><span class="nx">s</span> <span class="k">of</span> <span class="nx">a1</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="nx">w</span> <span class="k">of</span> <span class="nx">a2</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="nx">r</span> <span class="k">of</span> <span class="nx">a3</span><span class="p">)];</span>
<span class="c1">// x1x2x3</span>
<span class="c1">// x1x2y3</span>
<span class="c1">// x1y2x3</span>
<span class="c1">// x1y2y3</span>
<span class="c1">// y1x2x3</span>
<span class="c1">// y1x2y3</span>
<span class="c1">// y1y2x3</span>
<span class="c1">// y1y2y3</span></code></pre></figure>

<p>上面代码在一个数组推导之中，使用了三个for…of结构。</p>

<p>需要注意的是，数组推导的方括号构成了一个单独的作用域，在这个方括号中声明的变量类似于使用let语句声明的变量。</p>

<p><strong>（3）字符串推导</strong></p>

<p>由于字符串可以视为数组，因此字符串也可以直接用于数组推导。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">[</span><span class="nx">c</span> <span class="k">for</span> <span class="p">(</span><span class="nx">c</span> <span class="k">of</span> <span class="s1">'abcde'</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="sr">/</span><span class="se">[</span><span class="sr">aeiou</span><span class="se">]</span><span class="sr">/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">c</span><span class="p">))].</span><span class="nx">join</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span> <span class="c1">// 'ae'</span>

<span class="p">[</span><span class="nx">c</span><span class="o">+</span><span class="s1">'0'</span> <span class="k">for</span> <span class="p">(</span><span class="nx">c</span> <span class="k">of</span> <span class="s1">'abcde'</span><span class="p">)].</span><span class="nx">join</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span> <span class="c1">// 'a0b0c0d0e0'</span></code></pre></figure>

<p>上面代码使用了数组推导，对字符串进行处理。</p>

<p>上一部分的数组推导有一个缺点，就是新数组会立即在内存中生成。这时，如果原数组是一个很大的数组，将会非常耗费内存。</p>

<h3 id="多变量赋值">多变量赋值</h3>

<p>ES6允许简洁地对多变量赋值。正常情况下，将数组元素赋值给多个变量，只能一次次分开赋值。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span></code></pre></figure>

<p>ES6允许写成下面这样。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="p">[</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span></code></pre></figure>

<p>本质上，这种写法属于模式匹配，只要等号两边的模式相同，左边的变量就会被赋予对应的值。下面是一些嵌套数组的例子。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="p">[</span><span class="nx">foo</span><span class="p">,</span> <span class="p">[[</span><span class="nx">bar</span><span class="p">],</span> <span class="nx">baz</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">[[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">3</span><span class="p">]]</span>

<span class="kd">var</span> <span class="p">[,,</span><span class="nx">third</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"foo"</span><span class="p">,</span> <span class="s2">"bar"</span><span class="p">,</span> <span class="s2">"baz"</span><span class="p">]</span>

<span class="kd">var</span> <span class="p">[</span><span class="nx">head</span><span class="p">,</span> <span class="p">...</span><span class="nx">tail</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span></code></pre></figure>

<p>它还可以接受默认值。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="p">[</span><span class="nx">missing</span> <span class="o">=</span> <span class="kc">true</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">missing</span><span class="p">)</span>
<span class="c1">// true</span>

<span class="kd">var</span> <span class="p">{</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">3</span> <span class="p">}</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
<span class="c1">// 3</span></code></pre></figure>

<p>它不仅可以用于数组，还可以用于对象。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="p">{</span> <span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span> <span class="p">}</span> <span class="o">=</span> <span class="p">{</span> <span class="na">foo</span><span class="p">:</span> <span class="s2">"lorem"</span><span class="p">,</span> <span class="na">bar</span><span class="p">:</span> <span class="s2">"ipsum"</span> <span class="p">};</span>

<span class="nx">foo</span> <span class="c1">// "lorem"</span>
<span class="nx">bar</span> <span class="c1">// "ipsum"</span>

<span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">p1</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">"Hello"</span><span class="p">,</span>
    <span class="p">{</span> <span class="na">p2</span><span class="p">:</span> <span class="s2">"World"</span> <span class="p">}</span>
  <span class="p">]</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="p">[</span><span class="nx">p1</span><span class="p">,</span> <span class="p">{</span> <span class="nx">p2</span> <span class="p">}]</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">o</span><span class="p">;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">p1</span><span class="p">)</span>
<span class="c1">// "Hello"</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">p2</span><span class="p">)</span>
<span class="c1">// "World"</span></code></pre></figure>

<p>这种写法的用途很多。</p>

<p><strong>（1）交换变量的值。</strong></p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">[</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">y</span><span class="p">,</span> <span class="nx">x</span><span class="p">];</span> </code></pre></figure>

<p><strong>（2）从函数返回多个值。</strong></p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">example</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="p">[</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">]</span> <span class="o">=</span> <span class="nx">example</span><span class="p">();</span></code></pre></figure>

<p><strong>（3）函数参数的定义。</strong></p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">f</span><span class="p">({</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">p2</span><span class="p">,</span> <span class="nx">p3</span><span class="p">})</span> <span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">}</span></code></pre></figure>

<p><strong>（4）函数参数的默认值。</strong></p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajax</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">{</span>
  <span class="k">async</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">beforeSend</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{},</span>
  <span class="nx">cache</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">complete</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{},</span>
  <span class="nx">crossDomain</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nb">global</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
  <span class="c1">// ... more config</span>
<span class="p">})</span> <span class="p">{</span>
  <span class="c1">// ... do stuff</span>
<span class="p">};</span></code></pre></figure>

<h2 id="数据结构">数据结构</h2>

<h3 id="class结构">class结构</h3>

<p><strong>（1）基本用法</strong></p>

<p>ES6提供了“类”（class）。此前，一般用构造函数模拟“类”。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// ES5</span>
<span class="kd">var</span> <span class="nx">Language</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">founder</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">founder</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">year</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">year</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Language</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">summary</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="o">+</span><span class="s2">"由"</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">founder</span><span class="o">+</span><span class="s2">"在"</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">year</span><span class="o">+</span><span class="s2">"创造"</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// ES6</span>
<span class="kd">class</span> <span class="nx">Language</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">founder</span><span class="p">,</span> <span class="nx">year</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">founder</span> <span class="o">=</span> <span class="nx">founder</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">year</span> <span class="o">=</span> <span class="nx">year</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">summary</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="o">+</span><span class="s2">"由"</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">founder</span><span class="o">+</span><span class="s2">"在"</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">year</span><span class="o">+</span><span class="s2">"创造"</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>在上面代码中，ES6用constructor方法，代替ES5的构造函数。</p>

<p><strong>（2）继承</strong></p>

<p>ES6的class结构还允许使用extends关键字，表示继承。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">class</span> <span class="nx">MetaLanguage</span> <span class="kd">extends</span> <span class="nx">Language</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">z</span><span class="p">,</span> <span class="nx">version</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">z</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">version</span> <span class="o">=</span> <span class="nx">version</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">summary</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//...</span>
    <span class="k">super</span><span class="p">.</span><span class="nx">summary</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>上面代码的super方法，表示调用父类的构造函数。</p>

<h3 id="module定义">module定义</h3>

<p><strong>（1）基本用法</strong></p>

<p>ES6允许定义模块。也就是说，允许一个JavaScript脚本文件调用另一个脚本文件。</p>

<p>假设有一个circle.js，它是一个单独模块。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// circle.js</span>

<span class="k">export</span> <span class="kd">function</span> <span class="nx">area</span><span class="p">(</span><span class="nx">radius</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="nx">radius</span> <span class="o">*</span> <span class="nx">radius</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kd">function</span> <span class="nx">circumference</span><span class="p">(</span><span class="nx">radius</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="nx">radius</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>然后，main.js引用这个模块。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// main.js</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">area</span><span class="p">,</span> <span class="nx">circumference</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'circle'</span><span class="p">;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"圆面积："</span> <span class="o">+</span> <span class="nx">area</span><span class="p">(</span><span class="mi">4</span><span class="p">));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"圆周长："</span> <span class="o">+</span> <span class="nx">circumference</span><span class="p">(</span><span class="mi">14</span><span class="p">));</span></code></pre></figure>

<p>另一种写法是整体加载circle.js。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// main.js</span>

<span class="nx">module</span> <span class="nx">circle</span> <span class="k">from</span> <span class="s1">'circle'</span><span class="p">;</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"圆面积："</span> <span class="o">+</span> <span class="nx">circle</span><span class="p">.</span><span class="nx">area</span><span class="p">(</span><span class="mi">4</span><span class="p">));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"圆周长："</span> <span class="o">+</span> <span class="nx">circle</span><span class="p">.</span><span class="nx">circumference</span><span class="p">(</span><span class="mi">14</span><span class="p">));</span></code></pre></figure>

<p><strong>（2）模块的继承</strong></p>

<p>一个模块也可以继承另一个模块。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// circleplus.js</span>

<span class="k">export</span> <span class="o">*</span> <span class="k">from</span> <span class="s1">'circle'</span><span class="p">;</span>
<span class="k">export</span> <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="mf">2.71828182846</span><span class="p">;</span>
<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">exp</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>加载上面的模块。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// main.js</span>

<span class="nx">module</span> <span class="nx">math</span> <span class="k">from</span> <span class="s2">"circleplus"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">exp</span> <span class="k">from</span> <span class="s2">"circleplus"</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">exp</span><span class="p">(</span><span class="nx">math</span><span class="p">.</span><span class="nx">pi</span><span class="p">);</span></code></pre></figure>

<p><strong>（3）模块的默认方法</strong></p>

<p>还可以为模块定义默认方法。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// circleplus.js</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">exp</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<h2 id="ecmascript-7">ECMAScript 7</h2>

<p>2013年3月，ECMAScript 6的草案封闭，不再接受新功能了。新的功能将被加入ECMAScript 7。根据JavaScript创造者Brendan Eich的<a href="http://wiki.ecmascript.org/doku.php?id=harmony:harmony">设想</a>，ECMAScript 7将使得JavaScript更适于开发复杂的应用程序和函数库。</p>

<p>ECMAScript 7可能包括的功能有：</p>

<ul>
  <li>
    <p><strong>Object.observe</strong>：对象与网页元素的双向绑定，只要其中之一发生变化，就会自动反映在另一者上。</p>
  </li>
  <li>
    <p><strong>Multi-Threading</strong>：多线程支持。目前，Intel和Mozilla有一个共同的研究项目RiverTrail，致力于让JavaScript多线程运行。预计这个项目的研究成果会被纳入ECMAScript标准。</p>
  </li>
  <li>
    <p><strong>Traits</strong>：它将是“类”功能（class）的一个替代。通过它，不同的对象可以分享同样的特性。</p>
  </li>
</ul>

<p>其他可能包括的功能还有：更精确的数值计算、改善的内存回收、增强的跨站点安全、类型化的更贴近硬件的（Typed, Low-level）操作、国际化支持（Internationalization Support）、更多的数据结构等等。</p>

<h2 id="参考链接">参考链接</h2>

<ul>
  <li>Sayanee Basu, <a href="http://net.tutsplus.com/articles/news/ecmascript-6-today/">Use ECMAScript 6 Today</a></li>
  <li>Ariya Hidayat, <a href="http://www.sencha.com/blog/toward-modern-web-apps-with-ecmascript-6/">Toward Modern Web Apps with ECMAScript 6</a></li>
  <li>Nick Fitzgerald, <a href="http://fitzgeraldnick.com/weblog/50/">Destructuring Assignment in ECMAScript 6</a></li>
  <li>jmar777, <a href="http://devsmash.com/blog/whats-the-big-deal-with-generators">What’s the Big Deal with Generators?</a></li>
  <li>Nicholas C. Zakas, <a href="http://www.nczonline.net/blog/2013/09/10/understanding-ecmascript-6-arrow-functions/">Understanding ECMAScript 6 arrow functions</a></li>
  <li>Dale Schouten, <a href="http://html5hub.com/10-ecmascript-6-tricks-you-can-perform-right-now/">10 Ecmascript-6 tricks you can perform right now</a></li>
  <li>Mozilla Developer Network, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators">Iterators and generators</a></li>
  <li>Steven Sanderson, <a href="http://blog.stevensanderson.com/2013/12/21/experiments-with-koa-and-javascript-generators/">Experiments with Koa and JavaScript Generators</a></li>
  <li>Matt Baker, <a href="http://flippinawesome.org/2014/02/10/replacing-callbacks-with-es6-generators/">Replacing callbacks with ES6 Generators</a></li>
  <li>Domenic Denicola, <a href="http://www.slideshare.net/domenicdenicola/es6-the-awesome-parts">ES6: The Awesome Parts</a></li>
  <li>Casper Beyer, <a href="http://caspervonb.github.io/2014/03/05/ecmascript6-features-and-tools.html">ECMAScript 6 Features and Tools</a></li>
  <li>Luke Hoban, <a href="https://github.com/lukehoban/es6features">ES6 features</a></li>
</ul>


</article>

<div class="row">
<div class="twelve columns">

<h2>留言</h2>

<div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'jstutorial'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</section>

</div>
</div>

<footer>
<div class="row">
<div class="twelve columns">
	<p><a href="/introduction/license.html">版权声明</a> | last modified on 2014-02-27 </p>
</div>
</div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-43771063-1', 'ruanyifeng.com');
  ga('send', 'pageview');
</script>
</body>
</html>


